@using StartBootstrap.Freelancer.Blazor.Models
@using KenticoCloud.Delivery
@using Microsoft.Extensions.Configuration

@inject HttpClient Http
@inject IConfiguration  Configuration

@inherits LayoutComponentBase

<!-- Navigation menu -->
<NavMenu NavigationItems="@home?.NavigationItemsTyped" />

<!-- Masthead -->
<MasterHeader />

<!-- Portfolio Section -->
<Portfolio PortfolioItems="@home?.PortfolioItemsTyped" />

<!-- About Section -->
<About />

<!-- Contact Section -->
<Contact />

<!-- Footer -->
<MasterFooter />

<!-- Copyright Section -->
<Copyright />

<!-- Scroll to Top Button (Only visible on small and extra-small screen sizes) -->
<ScrollToTop />

<!-- Portfolio Modals -->
<Modal PortfolioItems="@home?.PortfolioItemsTyped" />


@code {
    Home home;
    private CustomTypeProvider TypeProvider { get; } = new CustomTypeProvider();

    protected override async Task OnInitAsync()
    {

        var projectId = Configuration.GetValue<string>("DeliveryOptions:ProjectId");
        var client = DeliveryClientBuilder.WithProjectId(projectId).WithHttpClient(Http).WithTypeProvider(TypeProvider).Build();
        var result = (await client.GetItemAsync<Home>("home"));
        home = result.Item;
    }
}
